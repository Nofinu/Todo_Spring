<!DOCTYPE html>
<html lang="en">
<head th:replace="~{fragments/head.html :: head}"></head>
<body class="d-flex flex-column justify-content-center align-items-center">
<h1 class="text-info">ToDo List</h1>

<div th:unless="${isLogged}">
    <a href="/todo/login/register">Register</a>
    <a href="/todo/login/login">Log In</a>
</div>
<div th:if="${isLogged}">
    <a href="#">logOut</a>
</div>

<div style="width: 90%">
    <table class="table  table-hover table-dark text-center rounded">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">title</th>
            <th scope="col">content</th>
            <th scope="col">Due Date</th>
            <th scope="col">complete</th>
            <th scope="col">Action</th>
        </tr>
        </thead>
        <tbody>

        <tr th:each="todo : ${todo}">
            <td th:text="${todo.id}"></td>
            <td th:text="${todo.title}"></td>
            <td th:text="${todo.content}"></td>
            <td th:text="${#dates.format(todo.dueDate,'dd-MM-yyyy')}"></td>
            <td><a th:class="${todo.complete} ?  'btn bg-success' : 'btn bg-danger' " th:text="${todo.complete} ?  'Do' : 'To Do'" th:href ="@{/todo/status/{id}(id = ${todo.getId()})}" style="width: 150px;height: 50px;color: white"></a></td>
            <td>
                <a th:href ="@{/todo/edit/{id}(id = ${todo.getId()})}" class="btn btn-info">Edit</a>


                <a th:href ="@{/todo/delete/{id}(id = ${todo.getId()})}" class="btn btn-danger">Delete</a>
            </td>
        </tr>

        </tbody>
    </table>
</div>
<div class="d-flex flex-row justify-content-center align-items-center">
    <form action="" method="post" style="margin-right: 30px">
        <select name="type">
            <option value="all">all</option>
            <option value="todo">ToDo</option>
            <option value="do">Do</option>
            <option th:if="${isLogged}" value="urgent">Urgent</option>
        </select>
        <button class="btn btn-info">select</button>
    </form>
    <a th:if="${isLogged}" href="/todo/form" class="btn btn-info">Add ToDo</a>
</div>

</body>
</html>